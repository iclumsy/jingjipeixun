<view class="page">
  <view wx:if="{{student}}" class="content">
    <view class="section-card">
      <view class="summary-row">
        <view class="summary-title">审核详情</view>
        <view class="status-tag status-{{student.status}}">{{statusText}}</view>
      </view>
      <view class="summary-meta">提交人：{{student.name || '-'}}</view>
      <view class="summary-meta">培训类型：{{trainingTypeText}}</view>
      <view class="summary-meta">公司：{{student.company || '-'}}</view>
      <view class="summary-meta">提交时间：{{submitTimeText}}</view>
      <view class="summary-meta" wx:if="{{student.reviewed_at}}">审核时间：{{reviewTimeText}}</view>
    </view>

    <view class="section-card">
      <view class="section-title">培训信息</view>
      <view class="field-row">
        <view class="field-label">作业类别</view>
        <view class="field-value">{{student.job_category || '-'}}</view>
      </view>
      <view class="field-row">
        <view class="field-label">操作项目</view>
        <view class="field-value">{{student.exam_project || '-'}}</view>
      </view>
      <view class="field-row">
        <view class="field-label">项目代码</view>
        <view class="field-value">{{student.project_code || '-'}}</view>
      </view>
    </view>

    <view class="section-card">
      <view class="section-title">基本信息</view>
      <view class="field-row">
        <view class="field-label">姓名</view>
        <view class="field-value">{{student.name || '-'}}</view>
      </view>
      <view class="field-row">
        <view class="field-label">性别</view>
        <view class="field-value">{{student.gender || '-'}}</view>
      </view>
      <view class="field-row">
        <view class="field-label">文化程度</view>
        <view class="field-value">{{student.education || '-'}}</view>
      </view>
      <view class="field-row">
        <view class="field-label">毕业学校</view>
        <view class="field-value">{{student.school || '-'}}</view>
      </view>
      <view class="field-row">
        <view class="field-label">所学专业</view>
        <view class="field-value">{{student.major || '-'}}</view>
      </view>
      <view class="field-row">
        <view class="field-label">身份证号</view>
        <view class="field-value">{{student.id_card || '-'}}</view>
      </view>
      <view class="field-row">
        <view class="field-label">手机号</view>
        <view class="field-value">{{student.phone || '-'}}</view>
      </view>
    </view>

    <view class="section-card">
      <view class="section-title">单位信息</view>
      <view class="field-row">
        <view class="field-label">单位名称</view>
        <view class="field-value">{{student.company || '-'}}</view>
      </view>
      <view class="field-row">
        <view class="field-label">单位地址</view>
        <view class="field-value">{{student.company_address || '-'}}</view>
      </view>
    </view>

    <view class="section-card">
      <view class="section-title">附件资料</view>
      <view class="attachments-grid">
        <view class="attachment-item" wx:if="{{downloadUrls.photo_path}}" bindtap="previewImage" data-url="{{downloadUrls.photo_path}}">
          <image class="attachment-image" src="{{downloadUrls.photo_path}}" mode="aspectFill" />
          <view class="attachment-label">个人照片</view>
        </view>
        <view class="attachment-item" wx:if="{{downloadUrls.diploma_path}}" bindtap="previewImage" data-url="{{downloadUrls.diploma_path}}">
          <image class="attachment-image" src="{{downloadUrls.diploma_path}}" mode="aspectFill" />
          <view class="attachment-label">学历证书</view>
        </view>
        <view class="attachment-item" wx:if="{{downloadUrls.id_card_front_path}}" bindtap="previewImage" data-url="{{downloadUrls.id_card_front_path}}">
          <image class="attachment-image" src="{{downloadUrls.id_card_front_path}}" mode="aspectFill" />
          <view class="attachment-label">身份证正面</view>
        </view>
        <view class="attachment-item" wx:if="{{downloadUrls.id_card_back_path}}" bindtap="previewImage" data-url="{{downloadUrls.id_card_back_path}}">
          <image class="attachment-image" src="{{downloadUrls.id_card_back_path}}" mode="aspectFill" />
          <view class="attachment-label">身份证反面</view>
        </view>
        <view class="attachment-item" wx:if="{{downloadUrls.hukou_residence_path}}" bindtap="previewImage" data-url="{{downloadUrls.hukou_residence_path}}">
          <image class="attachment-image" src="{{downloadUrls.hukou_residence_path}}" mode="aspectFill" />
          <view class="attachment-label">户口本户籍页</view>
        </view>
        <view class="attachment-item" wx:if="{{downloadUrls.hukou_personal_path}}" bindtap="previewImage" data-url="{{downloadUrls.hukou_personal_path}}">
          <image class="attachment-image" src="{{downloadUrls.hukou_personal_path}}" mode="aspectFill" />
          <view class="attachment-label">户口本个人页</view>
        </view>
      </view>
    </view>
  </view>

  <view class="bottom-actions" wx:if="{{student && student.status === 'unreviewed'}}">
    <button class="action-btn btn-reject" bindtap="onReject">驳回</button>
    <button class="action-btn btn-approve" bindtap="onApprove">审核通过</button>
  </view>

  <view class="readonly-hint" wx:if="{{student && student.status !== 'unreviewed'}}">当前记录不是待审核状态，仅支持查看</view>

  <view class="loading" wx:if="{{loading}}">加载中...</view>
</view>
