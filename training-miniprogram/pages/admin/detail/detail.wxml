<!-- pages/admin/detail/detail.wxml -->
<view class="container">
  <view class="detail-card card" wx:if="{{student}}">
    <!-- 学员基本信息 -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">基本信息</text>
        <view class="status-badge badge-{{student.status}}">{{statusText}}</view>
      </view>

      <view class="info-grid">
        <view class="info-item">
          <text class="info-label">姓名</text>
          <text class="info-value">{{student.name}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">性别</text>
          <text class="info-value">{{student.gender}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">文化程度</text>
          <text class="info-value">{{student.education}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">毕业学校</text>
          <text class="info-value">{{student.school || '-'}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">所学专业</text>
          <text class="info-value">{{student.major || '-'}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">身份证号</text>
          <text class="info-value">{{student.id_card}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">手机号</text>
          <text class="info-value">{{student.phone}}</text>
        </view>
      </view>
    </view>

    <!-- 单位信息 -->
    <view class="section">
      <view class="section-title">单位信息</view>
      <view class="info-grid">
        <view class="info-item full-width">
          <text class="info-label">单位名称</text>
          <text class="info-value">{{student.company}}</text>
        </view>
        <view class="info-item full-width">
          <text class="info-label">单位地址</text>
          <text class="info-value">{{student.company_address}}</text>
        </view>
      </view>
    </view>

    <!-- 培训信息 -->
    <view class="section">
      <view class="section-title">培训信息</view>
      <view class="info-grid">
        <view class="info-item">
          <text class="info-label">培训类型</text>
          <text class="info-value">{{trainingTypeText}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">作业类别</text>
          <text class="info-value">{{student.job_category}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">操作项目</text>
          <text class="info-value">{{student.exam_project || '-'}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">项目代码</text>
          <text class="info-value">{{student.project_code || '-'}}</text>
        </view>
      </view>
    </view>

    <!-- 附件预览 -->
    <view class="section">
      <view class="section-title">附件预览</view>
      <view class="attachments-grid">
        <view class="attachment-item" wx:if="{{downloadUrls.photo_path}}" bindtap="previewImage" data-url="{{downloadUrls.photo_path}}">
          <image class="attachment-image" src="{{downloadUrls.photo_path}}" mode="aspectFill" />
          <text class="attachment-label">个人照片</text>
        </view>
        <view class="attachment-item" wx:if="{{downloadUrls.diploma_path}}" bindtap="previewImage" data-url="{{downloadUrls.diploma_path}}">
          <image class="attachment-image" src="{{downloadUrls.diploma_path}}" mode="aspectFill" />
          <text class="attachment-label">学历证书</text>
        </view>
        <view class="attachment-item" wx:if="{{downloadUrls.id_card_front_path}}" bindtap="previewImage" data-url="{{downloadUrls.id_card_front_path}}">
          <image class="attachment-image" src="{{downloadUrls.id_card_front_path}}" mode="aspectFill" />
          <text class="attachment-label">身份证正面</text>
        </view>
        <view class="attachment-item" wx:if="{{downloadUrls.id_card_back_path}}" bindtap="previewImage" data-url="{{downloadUrls.id_card_back_path}}">
          <image class="attachment-image" src="{{downloadUrls.id_card_back_path}}" mode="aspectFill" />
          <text class="attachment-label">身份证反面</text>
        </view>
        <view class="attachment-item" wx:if="{{downloadUrls.hukou_residence_path}}" bindtap="previewImage" data-url="{{downloadUrls.hukou_residence_path}}">
          <image class="attachment-image" src="{{downloadUrls.hukou_residence_path}}" mode="aspectFill" />
          <text class="attachment-label">户口本户籍页</text>
        </view>
        <view class="attachment-item" wx:if="{{downloadUrls.hukou_personal_path}}" bindtap="previewImage" data-url="{{downloadUrls.hukou_personal_path}}">
          <image class="attachment-image" src="{{downloadUrls.hukou_personal_path}}" mode="aspectFill" />
          <text class="attachment-label">户口本个人页</text>
        </view>
      </view>
    </view>

    <!-- 审核信息 -->
    <view class="section" wx:if="{{student.reviewed_at}}">
      <view class="section-title">审核信息</view>
      <view class="info-grid">
        <view class="info-item">
          <text class="info-label">审核时间</text>
          <text class="info-value">{{reviewTime}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">提交时间</text>
          <text class="info-value">{{createTime}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="actions" wx:if="{{student && student.status === 'unreviewed'}}">
    <button class="btn btn-danger" bindtap="onReject">驳回</button>
    <button class="btn btn-success" bindtap="onApprove">审核通过</button>
  </view>

  <!-- 加载状态 -->
  <view class="loading" wx:if="{{loading}}">
    <text>加载中...</text>
  </view>
</view>
