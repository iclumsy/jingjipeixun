<!-- pages/admin/batch/batch.wxml -->
<view class="container">
  <view class="header card">
    <view class="header-title">æ‰¹é‡æ“ä½œ</view>
    <view class="header-desc">é€‰æ‹©å­¦å‘˜è¿›è¡Œæ‰¹é‡å®¡æ ¸æˆ–åˆ é™¤</view>
  </view>

  <view class="filter-section card">
    <view class="section-title">ç­›é€‰æ¡ä»¶</view>
    <view class="filter-row">
      <picker mode="selector" range="{{statusOptions}}" value="{{statusIndex}}" bindchange="onStatusChange">
        <view class="picker-value">çŠ¶æ€ï¼š{{statusOptions[statusIndex]}}</view>
      </picker>
    </view>
  </view>

  <view class="student-list">
    <view class="list-header">
      <checkbox-group bindchange="onSelectAll">
        <label>
          <checkbox value="all" checked="{{allSelected}}" />
          <text>å…¨é€‰</text>
        </label>
      </checkbox-group>
      <text class="selected-count">å·²é€‰æ‹© {{selectedCount}} äºº</text>
    </view>

    <checkbox-group bindchange="onStudentSelect">
      <block wx:for="{{students}}" wx:key="_id">
        <view class="student-item">
          <checkbox value="{{item._id}}" checked="{{item.selected}}" />
          <view class="student-info">
            <view class="student-name">{{item.name}}</view>
            <view class="student-detail">{{item.id_card}} | {{item.company}}</view>
          </view>
          <view class="status-badge badge-{{item.status}}">{{item.statusText}}</view>
        </view>
      </block>
    </checkbox-group>

    <view class="empty" wx:if="{{students.length === 0}}">
      <view class="empty-icon">ğŸ“‹</view>
      <view class="empty-text">æš‚æ— å­¦å‘˜</view>
    </view>
  </view>

  <view class="actions" wx:if="{{selectedCount > 0}}">
    <button class="btn btn-success" bindtap="onBatchApprove">æ‰¹é‡é€šè¿‡</button>
    <button class="btn btn-danger" bindtap="onBatchReject">æ‰¹é‡é©³å›</button>
  </view>
</view>
